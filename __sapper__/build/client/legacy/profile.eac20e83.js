import{_ as t,a as n,b as r,c as e,i as s,s as o,d as a,S as c,f as i,t as u,e as f,j as l,k as p,l as h,g as y,h as d,n as v,o as g,w as k,u as m,r as S,p as x,x as O,y as R,z as b,A as j,B as N,C as T,D as w}from"./client.5b898764.js";function D(t,n){return fetch(t,{method:"POST",credentials:"include",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}))}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,o=n(t);if(e){var a=n(this).constructor;s=Reflect.construct(o,arguments,a)}else s=o.apply(this,arguments);return r(this,s)}}function P(t){var n,r,e,s,o,a,c,O=JSON.stringify({$session:t[0]})+"";return{c:function(){n=i("button"),r=u("logout"),e=f(),s=i("p"),o=u("token "),a=u(O)},l:function(t){n=l(t,"BUTTON",{});var c=p(n);r=h(c,"logout"),c.forEach(y),e=d(t),s=l(t,"P",{});var i=p(s);o=h(i,"token "),a=h(i,O),i.forEach(y)},m:function(i,u,f){v(i,n,u),g(n,r),v(i,e,u),v(i,s,u),g(s,o),g(s,a),f&&c(),c=k(n,"click",t[2])},p:function(t,n){1&m(n,1)[0]&&O!==(O=JSON.stringify({$session:t[0]})+"")&&S(a,O)},i:x,o:x,d:function(t){t&&y(n),t&&y(e),t&&y(s),c()}}}function B(t,n,r){var e,s=O().session;function o(){return(o=N(T.mark((function t(){return T.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D("/logout");case 2:t.sent&&(w(s,e.token=null,e),j("/"));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return R(t,s,(function(t){return r(0,e=t)})),b((function(){e.token||j("/login")})),[e,s,function(){return o.apply(this,arguments)}]}var C=function(n){t(i,c);var r=J(i);function i(t){var n;return e(this,i),n=r.call(this),s(a(n),t,B,P,o,{}),n}return i}();export default C;
