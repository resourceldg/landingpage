import{S as s,i as t,s as a,e as n,t as o,a as e,b as i,f as r,g as c,d as l,c as u,j as f,k as d,o as p,l as g,n as h,p as k,r as y,u as O,v as S,w as b}from"./client.b9487793.js";function j(s){let t,a,k,y,O,S,b,j=JSON.stringify({$session:s[0]})+"";return{c(){t=n("button"),a=o("logout"),k=e(),y=n("p"),O=o("token "),S=o(j)},l(s){t=i(s,"BUTTON",{});var n=r(t);a=c(n,"logout"),n.forEach(l),k=u(s),y=i(s,"P",{});var o=r(y);O=c(o,"token "),S=c(o,j),o.forEach(l)},m(n,o,e){f(n,t,o),d(t,a),f(n,k,o),f(n,y,o),d(y,O),d(y,S),e&&b(),b=p(t,"click",s[2])},p(s,[t]){1&t&&j!==(j=JSON.stringify({$session:s[0]})+"")&&g(S,j)},i:h,o:h,d(s){s&&l(t),s&&l(k),s&&l(y),b()}}}function m(s,t,a){let n;const{session:o}=k();return y(s,o,s=>a(0,n=s)),O(()=>{n.token||S("/login")}),[n,o,async function(){var s,t;await(s="/logout",fetch(s,{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(s=>s.json()))&&(b(o,n.token=null,n),S("/"))}]}export default class extends s{constructor(s){super(),t(this,s,m,j,a,{})}}
